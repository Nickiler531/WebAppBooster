
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
    <title>WebAppBooster Demo</title>
    <script type="text/javascript" src="js/json.js"></script>
    <script type="text/javascript" src="js/webappbooster.js"></script>
    <style type="text/css">
    * {font-size: x-large;}
    h1 {font-size: xx-large;}
    </style>
</head>

<body onload="init()">

<script type="text/javascript">

function log(msg) {
    var l = document.getElementById("log");
    var s = msg;
    if (typeof msg != "string") {
        s = JSON.stringify(msg);
    }
    if (l.innerHTML != '') {
        l.innerHTML += '\n';
    }
    l.innerHTML += s;
    l.scrollTop = l.scrollHeight;
}

function init() {
    WebAppBooster.open('/demo', function (res) {
        if (res.status == WebAppBooster.OK) {
            log("WebAppBooster connected");
        } else if (res.status == WebAppBooster.CLOSED) {
            log("Connection closed");
        } else if (res.status == WebAppBooster.ERR_AUTHENTICATION_REQUIRED) {
            log("Authentication required");
            window.close();
        } else if (res.status == WebAppBooster.ERR_WEBSOCK_ACCESS_DENIED) {
            log("Connection access denied");
        } else {
            log("WebAppBooster not connected");
        }
    });
}

function requestPermissions() {
    var p = [WebAppBooster.PERMISSION_READ_CONTACTS,
             WebAppBooster.PERMISSION_GYRO];
    WebAppBooster.requestPermissions(p, function(resp) {
        if (resp.status == WebAppBooster.OK) {
            log("Permissions granted");
        } else {
            log("Permissions not granted");
        }
    });
}

function pickContact() {
    WebAppBooster.pickContact(function(resp) {
        log(resp);
    });
}

function startGyro() {
    WebAppBooster.startGyro(function(resp) {
        log(resp);
    });
}

function stopGyro() {
    WebAppBooster.stopGyro(function(resp) {
        // Do nothing
    });
}

</script>

<h1>WebAppBooster Demo</h1>

<button type="button" onclick="requestPermissions()">Request Permissions</button>

<p>

<button type="button" onclick="pickContact()">Pick Contact</button>

<p>

<button type="button" onclick="startGyro()">Start Gyro</button>

<p>

<button type="button" onclick="stopGyro()">Stop Gyro</button>

<p>

<textarea id="log" rows="20" style="width:100%;font-family:monospace; color:red;"></textarea>

</body>
</html>
